/**
 * HTX, HTXComponent
 * Copyright 2019-2022 Nate Pickens
 *
 * @license MIT
 * @version 0.0.6
 */
let HTX=function(){let t=new WeakMap;return class{static render(e,n){let i=t.get(e)||new HTX((HTX.templates||window)[e]||e);if(!i)throw`Template not found: ${e}`;return n&&(i.t=n),i.i.call(i.t,i),i.s}constructor(t){this.i=t,this.o=[],this.h=new WeakMap,this.l=new WeakMap}node(e,...n){let i,s=this.s,o=this.u,h=n.length,l=7&n[h-1],r=n[h-1]>>3,f=h%2==0?n[h-2]:void 0;for(1!=r&&(s=o&&s==o?o.firstChild:s.nextSibling);s&&this.h.get(s)<r;){let t=s;s=s.nextSibling,t.remove()}if(this.h.get(s)==r&&this.l.get(s)!=f&&this.h.get(s.nextSibling)==r&&this.l.get(s.nextSibling)==f&&(s=s.nextSibling,s.previousSibling.remove()),this.h.get(s)!=r||this.l.get(s)!=f||s instanceof Comment&&"[HTX:unknown]"==s.nodeValue&&null!=e){if(null==e)i=document.createComment("[HTX:unknown]");else if(e instanceof Node)i=e;else if(e&&e.render instanceof Function)i=e.render();else if(2&l)i=document.createTextNode(e);else if(4&l||this.o.length>0){let t=4&l?n[n.indexOf("xmlns")+1]:this.o[0].namespaceURI;i=document.createElementNS(t,e),4&l&&this.o.unshift(i)}else i=document.createElement(e);this.h.delete(s),this.l.delete(s),this.h.set(i,r),this.l.set(i,f)}else i=s,i instanceof Text&&i.nodeValue!==e&&(i.nodeValue=e);for(let t=0,e=1;e<n.length-1;t+=2,e+=2)"INPUT"!=i.tagName&&"SELECT"!=i.tagName||"value"!=n[t]&&"checked"!=n[t]?!1===n[e]||null===n[e]||void 0===n[e]?i.removeAttribute(n[t]):i.setAttribute(n[t],!0===n[e]?"":n[e]):i[n[t]]=n[e];o?s&&s!=o?i!=s&&o.insertBefore(i,s):o.append(i):t.set(i,this),this.s=i,3&l||(this.u=i)}close(t=1){for(;t-- >0;){let t=this.s,e=this.u;if(this.u=e.parentNode,t==e)for(;t.firstChild;)t.firstChild.remove();else for(;t&&t.nextSibling;)t.nextSibling.remove();this.o.length>0&&t==this.o[0]&&this.o.shift(),this.s=e}}}}(),HTXComponent=function(){let t,e,n=[];function i(){for(let[t,e]of n)t.didRender(e);e=null,n=[]}return class{constructor(t){this.htxPath=t}render(){let s=!this.node;if(s&&!t&&!e)throw"Cannot render unmounted component (call mount() instead of render())";return e=e||this,this.node=HTX.render(this.node||this.htxPath,this),this.didRender&&n.push([this,s]),t||e!=this||i(),this.node}mount(...e){t=!0;let n=e.find(t=>"string"==typeof t)||"append",s=e.find(t=>"string"!=typeof t)||document.body,o=this.render.bind(this);if("prepend"==n?s.prepend(o()):"append"==n?s.append(o()):"replace"==n?s.parentNode.replaceChild(o(),s):"before"==n?s.parentNode.insertBefore(o(),s):"after"==n?s.parentNode.insertBefore(o(),s.nextSibling):o=null,!o)throw`Unrecognized placement type: ${n}`;i(),t=!1}}}();
