/**
 * HTX and HTXComponent
 * Copyright 2019 Nate Pickens
 *
 * @license MIT
 */
let HTX=function(){let t=new WeakMap;return class{static render(e,s){let i=t.get(e)||new HTX(window[e]||e);return s&&(i.t=s),i.s.call(i.t,i),i.i}constructor(t){this.s=t,this.h=new WeakMap,this.o=new WeakMap}node(e,...s){let i,n=this.i,h=this.l,o=s.length,r=3&s[o-1],a=s[o-1]>>2,c=o%2==0?s[o-2]:void 0;for(1!=a&&(n=h&&n==h?h.firstChild:n.nextSibling);n&&this.h.get(n)<a;){let t=n;n=n.nextSibling,t.remove()}this.h.get(n)==a&&this.o.get(n)!=c&&this.h.get(n.nextSibling)==a&&this.o.get(n.nextSibling)==c&&(n=n.nextSibling).previousSibling.remove(),this.h.get(n)==a&&this.o.get(n)==c?(i=n)instanceof Text&&i.nodeValue!==e&&(i.nodeValue=e):(e instanceof Node?i=e:e&&e.render instanceof Function?i=e.render():!e||2&r?i=document.createTextNode(null==e?"":e):"svg"==e||this.svg?(i=document.createElementNS("http://www.w3.org/2000/svg",e),this.svg=!0):i=document.createElement(e),this.h.set(i,a),this.o.set(i,c));for(let t=0,e=1;e<s.length-1;t+=2,e+=2)"INPUT"!=i.tagName&&"SELECT"!=i.tagName||"value"!=s[t]&&"checked"!=s[t]?!1===s[e]||null===s[e]||void 0===s[e]?i.removeAttribute(s[t]):i.setAttribute(s[t],!0===s[e]?"":s[e]):i.value=s[e];h?n&&n!=h?i!=n&&h.insertBefore(i,n):h.append(i):t.set(i,this),this.i=i,3&r||(this.l=i)}close(t=1){for(;t-- >0;){let t=this.i,e=this.l;if(this.l=e.parentNode,t==e)for(;t.firstChild;)t.firstChild.remove();else for(;t&&t.nextSibling;)t.nextSibling.remove();this.i=e,"svg"==this.i.tagName&&(this.svg=!1)}}}}(),HTXComponent=function(){let t=!1,e=[];return class{constructor(t){this.htxPath=t}render(){if(!this.u&&!t)throw"Cannot render unmounted component (call mount() instead of render()";let s=!this.el;return this.el=this.htx(this.el||this.htxPath),this.didRender&&(this.u?this.didRender(s):s&&e.push(this)),this.el}mount(s,i="append"){switch(t=!0,e=[],this.render(),i){case"prepend":s.prepend(this.el);break;case"append":s.append(this.el);break;case"replace":s.parentNode.replaceChild(this.el,s);break;case"before":s.parentNode.insertBefore(this.el,s);break;case"after":s.parentNode.insertBefore(this.el,s.nextSibling);break;default:throw`Unrecognized placement type: ${i}`}for(let t of e)t.u=!0,t.didRender(!0);e=[]}htx(t){if(t instanceof String&&!window[t])throw`Template not found: ${t}`;return HTX.render(t,this)}}}();
