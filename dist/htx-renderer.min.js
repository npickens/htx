/* HTX.Renderer v0.1.1 :: Copyright 2019-2023 Nate Pickens :: MIT License */
(t=>{t.Renderer=class{static templateResolver(e,s,i=!1){let l="string"==typeof e?(void 0!==t&&t.templates||globalThis)[e]:e;if(!l)throw`Template not found: ${e}`;return new l(s)}constructor(t,e){this.t=new WeakMap,this.i=new WeakMap,this.l={}}node(t,...e){let s,i=this.o,l=this.h,o=e.length,h=e[o-1],n=e[o-1]>>3,a=o%2==0&&e[o-2],c=`${n}:${a}`;for(1==n?this.T={}:i=i==l?l.firstChild:i.nextSibling;i&&this.t.get(i)<n;){let t=i;i=i.nextSibling,t.remove()}let r=this.t.get(i)==n,f=r&&this.i.get(i)==a;if(a&&r&&!f){let t=this.l[c];t&&(i.parentNode.insertBefore(t,i),f=!!(i=t))}if(1&h)s=f?i:4&h?document.createElementNS(e[e.indexOf("xmlns")+1||-1]||l.namespaceURI,t):document.createElement(t);else if(t&&t.render instanceof Function&&(t=t.render()),null==t&&(t=""),t instanceof Node)s=t;else if(f&&3==i.nodeType){s=i;let e=t.toString();s.nodeValue!=e&&(s.nodeValue=e)}else s=document.createTextNode(t);s!=i&&(this.t.set(s,n),this.i.set(s,a)),a&&(this.T[c]=s);for(let t=0;t<e.length-2;t+=2){let i=e[t],l=e[t+1];"class"==i&&l instanceof Array&&(l=l.filter(Boolean).join(" ")||null),"OPTION"==s.tagName&&"selected"==i&&(s[i]=l),!1===l||null==l?s.removeAttribute(i):s.setAttribute(i,!0===l?"":l)}l&&(i&&i!=l?s!=i&&l.insertBefore(s,i):l.append(s)),this.o=s,1&h&&!(2&h)&&(this.h=s)}close(t=1){for(;t-- >0;){if(this.o==this.h)for(;this.o.firstChild;)this.o.firstChild.remove();else for(;this.o.nextSibling;)this.o.nextSibling.remove();this.o=this.h,this.h=this.h.parentNode}1==this.t.get(this.o)&&(this.rootNode=this.o,this.l=this.T,delete this.T)}}})(globalThis.HTX||={}),globalThis.HTX=Object.assign((function(t,e){return console.warn("[DEPRECATED] new HTX(...) is deprecated: directly instantiate template instead [e.g. new templateFcn(context)]"),globalThis.HTX.Renderer.templateResolver(t,e)}),globalThis.HTX||={});const HTX=new Proxy(globalThis.HTX,{get:(t,e,s)=>(console.warn("[DEPRECATED] Top-level HTX variable is deprecated: use globalThis.HTX instead"),t[e])});
