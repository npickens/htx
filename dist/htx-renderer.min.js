/* HTX.Renderer v0.1.0 :: Copyright 2019-2023 Nate Pickens :: MIT License */
(t=>{t.Renderer=class{static templateResolver(t,e,s=!1){let i,l;if("string"==typeof t?(l=`${globalThis.HTX.templates?"globalThis.HTX.templates":"globalThis"}['${t}']`,s&&console.warn(`DEPRECATED: Passing a template string to the HTX.Component constructor is deprecated. Pass a direct template function reference instead: ${l}`),i=(globalThis.HTX.templates||globalThis)[t]):(i=t,l=i?i.name||"<anonymousFunction>":"undefined"),!s&&console.warn(`DEPRECATED: new HTX(...) is deprecated. Instantiate the template directly instead: new ${l}(context)`),!i)throw`Template not found: ${t}`;return new i(e)}constructor(t,e){this.t=new WeakMap,this.i=new WeakMap,this.l={}}node(t,...e){let s,i=this.o,l=this.h,o=e.length,n=e[o-1],h=e[o-1]>>3,a=o%2==0&&e[o-2],c=`${h}:${a}`;for(1==h?this.T={}:i=i==l?l.firstChild:i.nextSibling;i&&this.t.get(i)<h;){let t=i;i=i.nextSibling,t.remove()}let r=this.t.get(i)==h,T=r&&this.i.get(i)==a;if(a&&r&&!T){let t=this.l[c];t&&(i.parentNode.insertBefore(t,i),T=!!(i=t))}if(1&n)s=T?i:4&n?document.createElementNS(e[e.indexOf("xmlns")+1||-1]||l.namespaceURI,t):document.createElement(t);else if(t&&t.render instanceof Function&&(t=t.render()),null==t&&(t=""),t instanceof Node)s=t;else if(T&&3==i.nodeType){s=i;let e=t.toString();s.nodeValue!=e&&(s.nodeValue=e)}else s=document.createTextNode(t);s!=i&&(this.t.set(s,h),this.i.set(s,a)),a&&(this.T[c]=s);for(let t=0;t<e.length-2;t+=2){let i=e[t],l=e[t+1];"class"==i&&l instanceof Array&&(l=l.filter(Boolean).join(" ")||null),"OPTION"==s.tagName&&"selected"==i&&(s[i]=l),!1===l||null==l?s.removeAttribute(i):s.setAttribute(i,!0===l?"":l)}l&&(i&&i!=l?s!=i&&l.insertBefore(s,i):l.append(s)),this.o=s,1&n&&!(2&n)&&(this.h=s)}close(t=1){for(;t-- >0;){if(this.o==this.h)for(;this.o.firstChild;)this.o.firstChild.remove();else for(;this.o.nextSibling;)this.o.nextSibling.remove();this.o=this.h,this.h=this.h.parentNode}1==this.t.get(this.o)&&(this.rootNode=this.o,this.l=this.T,delete this.T)}}})(globalThis.HTX||={}),globalThis.HTX=Object.assign((function(t,e){return globalThis.HTX.Renderer.templateResolver(t,e)}),globalThis.HTX||={});const HTX=new Proxy(globalThis.HTX,{get:(t,e,s)=>(console.warn("DEPRECATED: Top-level HTX variable has ben deprecated in favor of globalThis.HTX"),t[e])});
